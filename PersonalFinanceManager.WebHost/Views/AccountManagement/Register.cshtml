@model PersonalFinanceManager.Shared.Dto.RegisterDto

<div class="row mb-3">
    <div class="col">
        <h2 class="text-primary">Đăng ký tài khoản</h2>
    </div>
</div>

@if (!ViewData.ModelState.IsValid)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
        {
            <p>@error.ErrorMessage</p>
        }
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="card">
    <div class="card-body">
        <form asp-action="Register" method="post" class="needs-validation" novalidate>
            <div class="mb-3">
                <label asp-for="Email" class="form-label">Email</label>
                <input asp-for="Email" class="form-control" required placeholder="VD: example@gmail.com" />
                <div class="invalid-feedback">Vui lòng nhập email hợp lệ.</div>
            </div>

            <div class="mb-3">
                <label asp-for="FullName" class="form-label">Họ và tên</label>
                <input asp-for="FullName" class="form-control" required placeholder="VD: Nguyễn Văn A" />
                <div class="invalid-feedback">Vui lòng nhập họ và tên.</div>
            </div>

            <div class="mb-3">
                <label asp-for="Password" class="form-label">Mật khẩu</label>
                <input asp-for="Password" class="form-control" type="password" required />
                <div class="invalid-feedback">Vui lòng nhập mật khẩu.</div>
            </div>

            <div class="mb-3">
                <label asp-for="ConfirmPassword" class="form-label">Xác nhận mật khẩu</label>
                <input asp-for="ConfirmPassword" class="form-control" type="password" required />
                <div class="invalid-feedback">Vui lòng xác nhận mật khẩu.</div>
            </div>

            <div class="mb-3">
                <label asp-for="DateOfBirth" class="form-label">Ngày sinh</label>
                <input asp-for="DateOfBirth" class="form-control" type="date" required />
                <div class="invalid-feedback">Vui lòng chọn ngày sinh.</div>
            </div>

            <div class="mb-3">
                <label asp-for="PhoneNumber" class="form-label">Số điện thoại</label>
                <input asp-for="PhoneNumber" class="form-control" required placeholder="VD: 0901234567" />
                <div class="invalid-feedback">Vui lòng nhập số điện thoại.</div>
            </div>

            <div class="mb-3">
                <label asp-for="PreferredCurrency" class="form-label">Tiền tệ ưa thích</label>
                <select asp-for="PreferredCurrency" class="form-select" required>
                    <option value="">-- Chọn loại tiền --</option>
                    <option value="USD">USD</option>
                    <option value="VND">VND</option>
                    <option value="EUR">EUR</option>
                </select>
                <div class="invalid-feedback">Vui lòng chọn tiền tệ.</div>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">Đăng ký</button>
                <a asp-action="Login" class="btn btn-secondary">Đã có tài khoản? Đăng nhập</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        });
    </script>
}
